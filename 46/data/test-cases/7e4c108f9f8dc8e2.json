{"uid":"7e4c108f9f8dc8e2","name":"test_build_sample_container_success","fullName":"tests.test_miner_container.TestBuildSampleContainer#test_build_sample_container_success","historyId":"b927101041efa66689e42d1308594417","time":{"start":1742228741251,"stop":1742228741252,"duration":1},"description":"\n        build_sample_container:\n        Should build a new sample container when no matching image is found.\n        ","descriptionHtml":"<pre><code>    build_sample_container:\n    Should build a new sample container when no matching image is found.\n</code></pre>\n","status":"broken","statusMessage":"AttributeError: 'module' object at neurons.Miner.container has no attribute 'open'","statusTrace":"obj = <module 'neurons.Miner.container' from '/home/runner/work/ni-compute/ni-compute/neurons/Miner/container.py'>\nname = 'open', ann = 'neurons.Miner.container'\n\n    def annotated_getattr(obj: object, name: str, ann: str) -> object:\n        try:\n>           obj = getattr(obj, name)\nE           AttributeError: module 'neurons.Miner.container' has no attribute 'open'\n\n/opt/hostedtoolcache/Python/3.12.9/x64/lib/python3.12/site-packages/_pytest/monkeypatch.py:90: AttributeError\n\nThe above exception was the direct cause of the following exception:\n\nself = <test_miner_container.TestBuildSampleContainer object at 0x7f5a26f9a150>\ntmp_path = PosixPath('/tmp/pytest-of-runner/pytest-0/test_build_sample_container_su0')\nmonkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f5a26e066f0>\n\n    @allure.story(\"Build New Sample Container\")\n    def test_build_sample_container_success(self, tmp_path, monkeypatch):\n        \"\"\"\n        build_sample_container:\n        Should build a new sample container when no matching image is found.\n        \"\"\"\n        cnt.image_name_base = \"ssh-image-base:latest\"\n    \n        dummy_client = MagicMock()\n        dummy_client.images.list.return_value = []\n        dummy_client.images.build.return_value = (MagicMock(), None)\n    \n        monkeypatch.setattr(\"neurons.Miner.container.docker.from_env\", lambda: dummy_client)\n        monkeypatch.setattr(\"neurons.Miner.container.password_generator\", lambda n: \"fixedpassword\")\n        monkeypatch.setattr(\"neurons.Miner.container.os.makedirs\", lambda path, exist_ok: None)\n        # Patch open to write to a temporary file.\n        temp_file = tmp_path / \"dockerfile\"\n>       monkeypatch.setattr(\"neurons.Miner.container.open\", lambda f, mode: temp_file.open(mode))\n\ntests/test_miner_container.py:604: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/hostedtoolcache/Python/3.12.9/x64/lib/python3.12/site-packages/_pytest/monkeypatch.py:104: in derive_importpath\n    annotated_getattr(target, attr, ann=module)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nobj = <module 'neurons.Miner.container' from '/home/runner/work/ni-compute/ni-compute/neurons/Miner/container.py'>\nname = 'open', ann = 'neurons.Miner.container'\n\n    def annotated_getattr(obj: object, name: str, ann: str) -> object:\n        try:\n            obj = getattr(obj, name)\n        except AttributeError as e:\n>           raise AttributeError(\n                f\"{type(obj).__name__!r} object at {ann} has no attribute {name!r}\"\n            ) from e\nE           AttributeError: 'module' object at neurons.Miner.container has no attribute 'open'\n\n/opt/hostedtoolcache/Python/3.12.9/x64/lib/python3.12/site-packages/_pytest/monkeypatch.py:92: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"tmp_path_factory","time":{"start":1742228741248,"stop":1742228741248,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path","time":{"start":1742228741249,"stop":1742228741250,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"patch_container_names","time":{"start":1742228741249,"stop":1742228741249,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"monkeypatch","time":{"start":1742228741249,"stop":1742228741249,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"tmp_path::0","time":{"start":1742228741371,"stop":1742228741371,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"monkeypatch::0","time":{"start":1742228741372,"stop":1742228741372,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"feature","value":"Sample Container Build"},{"name":"story","value":"Build New Sample Container"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_miner_container"},{"name":"subSuite","value":"TestBuildSampleContainer"},{"name":"host","value":"fv-az1334-212"},{"name":"thread","value":"5295-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_miner_container"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"7e4c108f9f8dc8e2.json","parameterValues":[]}